(()=>{"use strict";var e="즐겨 찾기 목록에 추가",t="즐겨 찾기 목록에서 삭제";function r(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,l,"next",e)}function l(e){r(i,o,a,c,l,"throw",e)}c(void 0)}))}}var o,a,i,c="http://localhost:3000";const l={categoryApi:(i=n((function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{var n=yield fetch("".concat(c,"/api/content/").concat(e,"?length=").concat(t,"&start=").concat(r));return{error:!1,result:n.json()}}catch(e){return{error:!0,result:e}}})),function(e,t){return i.apply(this,arguments)}),rankingApi:(a=n((function*(){try{return{error:!1,result:(yield fetch("".concat(c,"/api/best"))).json()}}catch(e){return{error:!0,result:e}}})),function(){return a.apply(this,arguments)}),detailApi:(o=n((function*(e){try{var t=yield fetch("".concat(c,"/api/detail/").concat(e.replaceAll("/","-")));if(200!==t.status)throw new Error(t);window.location.href=t.url}catch(e){return alert("찾으시는 데이터가 없습니다.."),{error:!0,result:e}}})),function(e){return o.apply(this,arguments)})};function u(e,t){if("#bookmark"!==window.location.hash&&null!=t&&t.length){var{state:{likeContents:r}}=e.getState(),n=function(e){var t=e.querySelector("div").id.replace("category-item-",""),{innerText:n}=e.querySelector(".bookmark-button"),{length:o}=r.filter((e=>e.idx===+t));"☆"===n&&o?e.querySelector(".bookmark-button").innerText="★":"★"!==n||o||(e.querySelector(".bookmark-button").innerText="☆")};for(var o of t)n(o)}}function s(r,n,o){var{id:a,className:i,innerText:c}=r.target;if(function(e){return"bookmark-button"===e}(i)){var u=a.replace("bookmark-button-","");!function(r,n,o){"☆"===n?r.dispatch({type:e,payload:o}):r.dispatch((e=>({type:t,payload:e}))(o))}(n,c,o.find((e=>e.idx===+u)))}else{var s=null;for(var d of r.path){var v;if(null!==(v=d.id)&&void 0!==v&&v.includes("category-item")){s=+d.id.replace("category-item-","");break}}if(s){var{url:p}=o.find((e=>e.idx===s));l.detailApi(p),alert("데이터를 불러오는 중입니다.. 잠시만 기다려주세요.")}}}const d=e=>(()=>{var{idx:t,title:r,imageUrl:n,mediaName:o,url:a,summaryContent:i}=e;return'<div id="category-item-'.concat(t,'">\n        <div class="category-item-image" style="background-image : url(').concat(n,')"></div>\n        <div class="category-item-title">').concat(r,'</div>\n        <div class="category-item-summary">').concat(i||"...",'</div>\n        <div class="more-info-container">\n            <div class="category-item-media">by ').concat(o,'</div>\n            <button id="bookmark-button-').concat(t,'" class="bookmark-button">☆</button>\n        </div>\n    </div>')})();function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y="bookmarkedIds";function b(e){localStorage.setItem(y,JSON.stringify(e))}function m(){var e=localStorage.getItem(y);return e?JSON.parse(e):null}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const k=(r,n)=>{switch(n.type){case e:return[...r,h(h({},n.payload),{},{timestamp:Date.now()})];case t:var{payload:{idx:o}}=n;return r.filter((e=>e.idx!==+o));default:return r}};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S={likeContents:[]};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){T(a,n,o,i,c,"next",e)}function c(e){T(a,n,o,i,c,"throw",e)}i(void 0)}))}}var C,H,M=document.getElementById("app"),q=new function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n={state:r,observed:[],reducers:{}},o=()=>{var e=m();e&&(n.state.likeContents=e)},a=()=>{var{observed:e}=n;for(var t of e)t()},i=e=>{n=j(j({},n),e)},c=e=>{i({reducers:j(j({},n.reducers),e)})},l=r=>{var{type:o,payload:i}=r;if(o===e||o===t){var{bookmarkReducer:c}=n.reducers,{state:{likeContents:l}}=n;n.state.likeContents=c(l,{type:o,payload:i})}b(n.state.likeContents),a()},u=e=>{var{observed:t}=n;t.push(e),i({observed:[...new Set(t)]})},s=e=>{var{callback:t,option:r}=e,{observed:o}=n;i(r?{observed:[]}:{observed:o.filter((e=>e!==t))})},d=()=>n;return o(),c({bookmarkReducer:k}),{combineReducers:c,dispatch:l,subscribeStore:u,unsubscribeStore:s,nofifyObserved:a,getState:d}},A=[{url:"/",component:e=>{var{parent:t,store:r}=e,n={loading:!0,error:!1,categoryContent:{},topRank:[]},o=()=>{var e=document.querySelector(".category-container"),t=null==e?void 0:e.querySelectorAll(".category-item-container");u(r,t)},a=e=>{var{path:t}=e,r=null;for(var o of t)if(o.id){r=+o.id.replace("content-","");break}var{url:a}=n.topRank.find((e=>e.idx===r));l.detailApi(a),alert("데이터를 불러오는 중입니다.. 잠시만 기다려주세요.")},i=()=>{var e,i,{loading:c,error:l,categoryContent:u,topRank:v}=n;if(t.innerHTML="",c)t.innerHTML='<div id="loading">로딩 중입니다...</div>';else if(l)t.innerHTML='<div id="error">예상치 못한 문제가 발생했습니다. 잠시 후 다시 시도해주세요.</div>';else{var p=document.createElement("div"),f=document.createElement("div");if(p.className="category-container",f.className="top12-container",Object.keys(u)){var{life:y,food:b,travel:m,culture:g}=u;[["라이프",y],["푸드",b],["여행",m],["문화",g]].forEach((e=>{var[t,r]=e;null!=r&&r.length&&(p.innerHTML+=((e,t)=>'<div class="category-content-container">\n      <div class="category-content-title">#'.concat(e,"</div>\n      <ul>").concat(t.map((e=>'<li class="category-item-container">'.concat(d(e),"</li>"))).join(""),"</ul>\n    </div>"))(t,r))}))}v.length&&(f.innerHTML='\n    <div class="top12-title">실시간 TOP 12</div>\n    <ul>\n        '.concat(n.topRank.map(((e,t)=>'<li class="top12-list" id="content-'.concat(e.idx,'">\n                <div class="list-rank">').concat(t+1,'</div>\n                <div class="list-title">').concat(e.title,'</div>\n                <div class="list-media">by ').concat(e.mediaName,"</div>\n            </li>"))).join(""),"\n    </ul>")),t.appendChild(p),t.appendChild(f),e=document.querySelector(".category-container"),i=document.querySelector(".top12-container"),e.addEventListener("click",(e=>{var t=Object.entries(n.categoryContent).map((e=>{var[t,r]=e;return r})).flatMap((e=>e));s(e,r,t)})),i.addEventListener("click",a),o()}},c=e=>{n=p(p({},n),e),i()};i(),(()=>{var{categoryApi:e,rankingApi:t}=l,r=["life","food","travel","culture"];Promise.all([...r.map((t=>e(t,4))),t()]).then((e=>{var t={categoryContent:{},topRank:[]};e.forEach(((n,o)=>{var{error:a,result:i}=n;if(a)throw a;o===e.length-1?i.then((e=>{var{data:r}=e;t.topRank=r})).then((()=>{c(t)})):i.then((e=>{var{data:n}=e;t.categoryContent[r[o]]=n}))}))})).catch((e=>{c({error:!0})})).finally((()=>{c({loading:!1})}))})(),r.subscribeStore(o)}},{url:"/content/:category",component:e=>{var t,r,n,o,{parent:a,url:i,category:c,store:v}=e,p={loading:!0,error:!1,count:0,data:[]},f=()=>{var e=document.querySelector(".category-content-lists"),t=null==e?void 0:e.querySelectorAll(".category-item-container");u(v,t)},y=(t=function(){var e=x((function*(){if(window.location.hash){var{categoryApi:e}=l;try{var{error:t,result:r}=yield e(c,8,p.count);if(t)throw t;r.then((e=>{var{data:t}=e;g({data:[...p.data,...t]})}))}catch(e){g({error:!0})}finally{g({count:p.count+8})}}}));return function(){return e.apply(this,arguments)}}(),r=()=>O(),n=0,o=null,e=>{if("#bookmark"===window.location.hash||o&&o!==window.location.hash)r();else if(window.scrollY+window.innerHeight>=document.body.scrollHeight){var a=Date.now();if(a-n>500&&e<40)t(),n=a,o=window.location.hash;else{if(!(e>40))return;o=null,r()}}}),b=()=>y(p.count),m=()=>{var e,{loading:t,error:r,data:n}=p;a.innerHTML="",t?a.innerHTML='<div id="loading">로딩 중입니다...</div>':r?a.innerHTML='<div id="error">예상치 못한 문제가 발생했습니다. 잠시 후 다시 시도해주세요.</div>':(a.innerHTML='<div>\n        <div class="category-page-title">#'.concat(c,'</div>\n        <ul class="category-content-lists">\n          ').concat((null==n?void 0:n.length)>0?n.map((e=>'<li class="category-item-container">'.concat(d(e),"</li>"))).join(""):"<span>데이터가 없습니다.</span>","\n      </ul>\n      </div>"),null===(e=document.querySelector(".category-content-lists"))||void 0===e||e.addEventListener("click",(e=>s(e,v,p.data))),f())},g=e=>{p=L(L({},p),e),m()},h=function(){var e=x((function*(){var{categoryApi:e}=l;try{var{error:t,result:r}=yield e(c,12,p.count);if(t)throw t;r.then((e=>{var{data:t}=e;g({data:t})}))}catch(e){g({error:!0})}finally{g({loading:!1,count:p.count+12})}window.addEventListener("scroll",b,!0)}));return function(){return e.apply(this,arguments)}}(),O=()=>{window.removeEventListener("scroll",b,!0)};m(),h(),v.subscribeStore(f)}},{url:"/bookmark",component:e=>{var{parent:t,store:r}=e;(()=>{var e,{state:{likeContents:n}}=r.getState();t.innerHTML='<div class="bookmark-page-container">\n      <div class="bookmark-title">#내 즐겨찾기 목록</div>\n      <ul class="bookmark-list-container">\n        '.concat(n.length>0?n.sort(((e,t)=>t.timestamp-e.timestamp)).map((e=>"<li>".concat((e=>{var{idx:t,title:r,imageUrl:n,mediaName:o}=e;return'<div class="bookmark-item-container" id="category-item-'.concat(t,'">\n      <div class="bookmark-item-title">').concat(r,'</div>\n      <div class="bookmark-item-image" style="background-image : url(').concat(n,')"></div>\n      <div class="bookmark-item-media">by ').concat(o,"</div>   \n    </div>")})(e),"</li>"))).join(""):"<span>등록된 즐겨찾기가 없습니다.</span>","\n      </ul>\n    </div>"),null===(e=document.querySelector(".bookmark-list-container"))||void 0===e||e.addEventListener("click",(e=>s(e,r,n)))})()}},{url:"/content/:category/:idx",component:()=>{}},{url:"/notfound",component:e=>{var{parent:t}=e;t.innerHTML='<div>페이지를 찾을 수 없습니다. <button><a href="#" />홈으로 이동</button></div>'}}];function R(e){var{hash:t}=window.location,r="/".concat(t.replace("#",""));if(q.unsubscribeStore({option:!0}),"/"===r)A[0].component({parent:M,store:q});else if("/content/"===r.substring(0,9)){var n=r.replace("/content/","");A[1].component({parent:M,category:n,url:A[1].url,store:q})}else"/bookmark"===r?A[2].component({parent:M,store:q}):A[4].component({parent:M,store:q})}C=document.getElementById("navigation"),H={title:["홈","라이프","푸드","여행","컬쳐","즐겨찾기"],path:["","life","food","travel","culture","bookmark"]},(()=>{var e=document.createElement("ul"),{title:t}=H;t.forEach(((t,r)=>{e.innerHTML+=((e,t)=>{var{path:r}=H;return'<li><a href="#'.concat("홈"===e||"즐겨찾기"===e?r[t]:"content/".concat(r[t]),'" />').concat(e,"</li>")})(t,r)})),C.appendChild(e)})(),function(){window.addEventListener("hashchange",R);var{hash:e}=window.location;e=e||"#",window.location.href=window.location.origin+e,R()}()})();
//# sourceMappingURL=index.d9ff9de18b.min.js.map